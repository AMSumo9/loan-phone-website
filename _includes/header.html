<!-- Header - CAPITALIZED LOGO + DARK MODE TOGGLE -->
<header class="bg-white shadow-lg sticky top-0 z-40">
    <div class="container mx-auto px-6">
        <div class="flex items-center justify-between h-24">
            <!-- Logo with Phone Icon - CAPITALIZED -->
            <div class="flex items-center">
                <a href="{{ site.baseurl }}/" class="flex items-center space-x-4">
                    <i class="fas fa-phone-alt text-5xl text-red-600"></i>
                    <div class="company-name font-bold text-red-600" style="font-family: 'Poppins', sans-serif;">
                        THE LOAN PHONE
                    </div>
                </a>
            </div>

            <!-- Desktop Navigation -->
            <nav class="hidden md:flex items-center space-x-8">
                {% for item in site.data.navigation.main %}
                    {% if item.type == "anchor" %}
                        <!-- FIXED: How It Works link -->
                        {% if item.name == "How It Works" %}
                            <a href="{{ site.baseurl }}/#how-it-works" class="text-gray-700 hover:text-red-600 transition duration-200 font-medium text-lg">
                                {{ item.name }}
                            </a>
                        {% else %}
                            <a href="{{ item.url }}" class="text-gray-700 hover:text-red-600 transition duration-200 font-medium text-lg">
                                {{ item.name }}
                            </a>
                        {% endif %}
                    {% else %}
                        <a href="{{ site.baseurl }}{{ item.url }}" class="text-gray-700 hover:text-red-600 transition duration-200 font-medium text-lg">
                            {{ item.name }}
                        </a>
                    {% endif %}
                {% endfor %}
            </nav>

            <!-- Right Side: Dark Mode + CTA Buttons -->
            <div class="hidden md:flex items-center space-x-3">
                <!-- ADDED BACK: Dark Mode Toggle -->
                <button id="theme-toggle-desktop" class="p-2 text-gray-600 hover:text-red-600 transition duration-200">
                    <i class="fas fa-moon text-xl"></i>
                </button>
                
                <!-- CTA Buttons - LIGHT PINK BACKGROUND COLOR -->
                <a href="tel:{{ site.contact.phone }}" 
                   class="inline-flex items-center px-5 py-3 text-gray-800 font-semibold rounded-lg transition duration-200 hover:opacity-80 text-lg"
                   style="background-color: #fce8e8;">
                    <i class="fas fa-phone mr-2"></i>
                    Speak to an Expert
                </a>
                
                <button onclick="openSupportModal()" 
                        class="inline-flex items-center px-5 py-3 border-2 text-gray-700 font-semibold rounded-lg hover:opacity-80 transition duration-200 text-lg"
                        style="border-color: #fce8e8; background-color: transparent;">
                    <i class="fas fa-edit mr-2"></i>
                    Submit Inquiry
                </button>
            </div>

            <!-- Mobile menu button + dark mode -->
            <div class="md:hidden flex items-center space-x-2">
                <!-- Mobile Dark Mode Toggle -->
                <button id="theme-toggle-mobile" class="p-2 text-gray-600 hover:text-red-600 transition duration-200">
                    <i class="fas fa-moon text-xl"></i>
                </button>
                
                <button onclick="toggleMobileMenu()" class="text-red-600 hover:text-red-700 focus:outline-none">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <div id="mobile-menu" class="md:hidden bg-white border-t border-gray-200 hidden">
        <div class="px-6 py-4 space-y-4">
            {% for item in site.data.navigation.main %}
                {% if item.type == "anchor" %}
                    {% if item.name == "How It Works" %}
                        <a href="{{ site.baseurl }}/#how-it-works" class="block text-gray-700 hover:text-red-600 font-medium text-lg" onclick="toggleMobileMenu()">
                            {{ item.name }}
                        </a>
                    {% else %}
                        <a href="{{ item.url }}" class="block text-gray-700 hover:text-red-600 font-medium text-lg" onclick="toggleMobileMenu()">
                            {{ item.name }}
                        </a>
                    {% endif %}
                {% else %}
                    <a href="{{ site.baseurl }}{{ item.url }}" class="block text-gray-700 hover:text-red-600 font-medium text-lg" onclick="toggleMobileMenu()">
                        {{ item.name }}
                    </a>
                {% endif %}
            {% endfor %}
            
            <!-- Mobile CTA Buttons - LIGHT PINK -->
            <div class="pt-4 border-t border-gray-200 space-y-3">
                <a href="tel:{{ site.contact.phone }}" 
                   class="block w-full text-center px-4 py-3 text-gray-800 font-semibold rounded-lg text-lg"
                   style="background-color: #fce8e8;">
                    <i class="fas fa-phone mr-2"></i>
                    Speak to an Expert
                </a>
                
                <button onclick="openSupportModal(); toggleMobileMenu();" 
                        class="block w-full px-4 py-3 border-2 text-gray-700 font-semibold rounded-lg text-lg"
                        style="border-color: #fce8e8;">
                    <i class="fas fa-edit mr-2"></i>
                    Submit Inquiry
                </button>
            </div>
        </div>
    </div>
</header>

<!-- RESPONSIVE HEADER FIXES -->
<style>
/* Header Container Full Width Fix */
header {
    width: 100% !important;
    min-width: 100% !important;
    background-color: white !important;
    box-sizing: border-box !important;
}

header .container {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* Responsive Company Name Sizing */
.company-name {
    font-size: 3rem; /* Default desktop size */
    line-height: 1.1;
    white-space: nowrap;
}

/* Large Desktop (1200px+) */
@media (min-width: 1200px) {
    .company-name {
        font-size: 3rem;
    }
}

/* Desktop/Laptop (992px - 1199px) */
@media (min-width: 992px) and (max-width: 1199px) {
    .company-name {
        font-size: 2.5rem;
    }
}

/* Tablet Landscape (768px - 991px) */
@media (min-width: 768px) and (max-width: 991px) {
    .company-name {
        font-size: 2rem;
    }
    
    header .container {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
}

/* Mobile Large (481px - 767px) */
@media (min-width: 481px) and (max-width: 767px) {
    .company-name {
        font-size: 1.75rem;
    }
}

/* Mobile Small (320px - 480px) */
@media (max-width: 480px) {
    .company-name {
        font-size: 1.5rem;
    }
    
    header .flex.items-center.space-x-4 {
        gap: 0.5rem !important;
    }
    
    .fas.fa-phone-alt {
        font-size: 2rem !important;
    }
}

/* Apple Device Specific Fixes */
@supports (-webkit-touch-callout: none) {
    /* iOS Safari and iPad specific fixes */
    header {
        width: 100vw !important;
        margin-left: calc(-50vw + 50%) !important;
        position: relative !important;
        left: 50% !important;
        right: 50% !important;
        margin-right: calc(-50vw + 50%) !important;
        background-color: white !important;
        z-index: 40 !important;
    }
    
    header .container {
        margin-left: auto !important;
        margin-right: auto !important;
        width: 100% !important;
        max-width: 100% !important;
    }
}

/* iPad Specific Adjustments */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
    .company-name {
        font-size: 2.25rem !important;
    }
    
    header .container {
        padding-left: 1.5rem !important;
        padding-right: 1.5rem !important;
    }
}

/* iPhone Specific Adjustments */
@media only screen and (min-device-width: 320px) and (max-device-width: 667px) {
    .company-name {
        font-size: 1.5rem !important;
    }
}

/* Prevent horizontal scrolling */
body {
    overflow-x: hidden !important;
}
</style>

<script>
// Mobile menu toggle
function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    if (menu) {
        menu.classList.toggle('hidden');
    }
}
</script>
